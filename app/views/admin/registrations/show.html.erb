<% content_for :title, "Registration Details" %>

<div class="page-header">
  <div>
    <h1 class="page-header__title">Registration Details</h1>
    <p class="page-header__subtitle">Verify details before approving.</p>
  </div>

  <div class="page-actions">
    <%= link_to "Back to Pending", admin_registrations_path, class: "btn btn-ghost" %>
  </div>
</div>

<div class="form-grid" style="margin-bottom: 14px;">
  <div class="card">
    <h3 style="margin-top: 0;">User Information</h3>

    <div class="form-group">
      <div class="form-label">Name</div>
      <div class="readonly"><%= @registration.name %></div>
    </div>

    <div class="form-group">
      <div class="form-label">Email</div>
      <div class="readonly"><%= @registration.email %></div>
    </div>

    <div class="form-group">
      <div class="form-label">Requested Role</div>
      <div class="readonly">
        <%=
          case @registration.role_request
          when "teacher_request" then "Teacher"
          when "parent_request"  then "Parent"
          when "staff_request"   then "Staff"
          else "N/A"
          end
        %>
      </div>
    </div>

    <div class="form-group">
      <div class="form-label">Registration Date</div>
      <div class="readonly"><%= @registration.created_at.strftime("%B %d, %Y at %I:%M %p") %></div>
    </div>
  </div>

  <div class="card">
    <h3 style="margin-top: 0;">Verification</h3>

    <div class="form-group">
      <div class="form-label">Verification Code</div>
      <div class="readonly"><%= @registration.verification_code %></div>
    </div>

    <div class="form-group">
      <div class="form-label">Account Status</div>
      <div>
        <% if @registration.approved? %>
          <span class="status-badge status-active">Approved</span>
        <% else %>
          <span class="status-badge status-inactive">Pending Approval</span>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="page-actions">
  <%= link_to "Approve",
              approve_admin_registration_path(@registration),
              class: "btn btn-primary",
              data: { turbo_method: :patch, turbo_confirm: "Approve this registration?" } %>

  <%= link_to "Reject",
              reject_admin_registration_path(@registration),
              class: "btn",
              style: "border-color: rgba(180,35,24,.35); color: var(--danger);",
              data: { turbo_method: :patch, turbo_confirm: "Reject and delete this user?" } %>
</div>
