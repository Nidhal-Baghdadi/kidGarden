<% content_for :title, @resource.title %>

<div class="d-flex justify-between items-center mb-4">
  <h1><%= @resource.title %></h1>
  <div>
    <% if current_user.admin? || current_user.id == @resource.user_id %>
      <%= link_to "Edit", edit_resource_path(@resource), class: "btn btn-primary" %>
      <%= link_to "Back to Resources", resources_path, class: "btn btn-outline", style: "margin-left: 0.5rem;" %>
    <% else %>
      <%= link_to "Back to Resources", resources_path, class: "btn btn-outline" %>
    <% end %>
  </div>
</div>

<div class="grid grid-cols-2 mb-4">
  <div class="card">
    <h3>Resource Details</h3>
    <div class="form-group">
      <label><strong>Title:</strong></label>
      <p><%= @resource.title %></p>
    </div>
    <div class="form-group">
      <label><strong>Category:</strong></label>
      <p><%= @resource.category.humanize %></p>
    </div>
    <div class="form-group">
      <label><strong>Subject:</strong></label>
      <p><%= @resource.subject %></p>
    </div>
    <div class="form-group">
      <label><strong>Classroom:</strong></label>
      <p><%= @resource.classroom&.name || "All Classrooms" %></p>
    </div>
  </div>

  <div class="card">
    <h3>Description</h3>
    <div class="form-group">
      <p><%= @resource.description.present? ? @resource.description : "No description provided" %></p>
    </div>
    <div class="form-group">
      <label><strong>Uploaded By:</strong></label>
      <p><%= @resource.user&.name || "System" %></p>
    </div>
    <div class="form-group">
      <label><strong>Upload Date:</strong></label>
      <p><%= @resource.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
    </div>
  </div>
</div>

<div class="card">
  <h3>Resource File</h3>
  <% if @resource.file.attached? %>
    <div class="d-flex justify-between items-center">
      <div>
        <p><strong>File:</strong> <%= @resource.file.filename %></p>
        <p><strong>Size:</strong> <%= number_to_human_size(@resource.file.byte_size) if @resource.file.byte_size %></p>
        <p><strong>Content Type:</strong> <%= @resource.file.content_type %></p>
      </div>
      <%= link_to "Download", rails_blob_path(@resource.file, disposition: "attachment"), class: "btn btn-primary" %>
    </div>
  <% else %>
    <p>No file attached to this resource.</p>
  <% end %>
</div>